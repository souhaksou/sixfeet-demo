"use strict";(self["webpackChunkvue_e_commerce"]=self["webpackChunkvue_e_commerce"]||[]).push([[121],{3121:function(t,s,i){i.r(s),i.d(s,{default:function(){return A}});var e=i(3396),a=i(7139),o=i(9242);const c=(0,e._)("section",{class:"bg-light py-5"},[(0,e._)("h2",{class:"text-center"},"選你所愛  /  愛你所選")],-1),r={class:"container"},l={class:"row my-5"},d={class:"col-lg-3"},n={class:"nav nav-pills flex-row flex-lg-column text-center text-lg-start fs-3"},h=["onClick"],u={class:"col-lg-9"},g={class:"mt-5 mt-lg-0 row row-cols-1 row-cols-sm-2 row-cols-xl-3 gy-3"},v={class:"card h-100"},f=["src","alt"],p={class:"card-body text-center d-flex justify-content-end flex-column"},b={class:"card-title mb-3"},m={class:"card-text border-bottom mb-3 pb-3"},k={class:"h6 text-secondary lh-base"},_=(0,e.Uk)(" 原價 "),w={class:"text-decoration-line-through"},y={class:"h5 text-dark"},x=["onClick"],P=(0,e._)("i",{class:"bi bi-info-square-fill"},null,-1),C=(0,e.Uk)("  查看更多資訊 "),I=[P,C],$={class:"row row-cols-1 row-cols-md-2 gx-1"},S={class:"col mb-3 mb-lg-0"},L=["onClick"],D=(0,e._)("i",{class:"bi bi-cart-plus-fill"},null,-1),F=(0,e.Uk)(" 加入購物車 "),M=[D,F],U={class:"col"},N=["onClick"],z={key:0},O=(0,e._)("i",{class:"bi bi-bag-heart-fill"},null,-1),H=(0,e.Uk)(" 加入最愛"),J=[O,H],T={key:1},Y=(0,e._)("i",{class:"bi bi-heartbreak-fill"},null,-1),q=(0,e.Uk)(" 我不愛它"),K=[Y,q];function j(t,s,i,P,C,D){const F=(0,e.up)("loading-overlay");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(F,{active:C.isLoading},null,8,["active"]),c,(0,e._)("section",r,[(0,e._)("div",l,[(0,e._)("div",d,[(0,e._)("ul",n,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(C.list,(t=>((0,e.wg)(),(0,e.iD)("li",{class:"nav-item col",key:t.name},[(0,e._)("a",{href:"#",class:(0,a.C_)(["nav-link",{active:t.active===C.category}]),onClick:(0,o.iM)((s=>D.showProducts(t.active)),["prevent"])},(0,a.zw)(t.name),11,h)])))),128))])]),(0,e._)("div",u,[(0,e._)("div",g,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(C.products,(s=>((0,e.wg)(),(0,e.iD)("div",{class:"col",key:s.id},[(0,e._)("div",v,[(0,e._)("img",{src:s.imageUrl,class:"card-img-top img-fluid",alt:s.title},null,8,f),(0,e._)("div",p,[(0,e._)("h3",b,(0,a.zw)(s.title),1),(0,e._)("div",m,[(0,e._)("p",k,[_,(0,e._)("span",w,"NT$"+(0,a.zw)(t.$filters.currency(s.origin_price)),1)]),(0,e._)("p",y,"特價 NT$"+(0,a.zw)(t.$filters.currency(s.price)),1),(0,e._)("a",{href:"#",class:"btn btn-dark d-block",onClick:(0,o.iM)((t=>D.getProduct(s.id)),["prevent"])},I,8,x)]),(0,e._)("div",$,[(0,e._)("div",S,[(0,e._)("a",{href:"#",class:(0,a.C_)(["d-block btn btn-outline-dark px-1",{disabled:C.status.loadingItem===s.id}]),onClick:(0,o.iM)((t=>D.addCart(s.id)),["prevent"])},M,10,L)]),(0,e._)("div",U,[(0,e._)("a",{href:"#",class:"d-block btn btn-outline-dark px-1",onClick:(0,o.iM)((t=>D.toggleFavorites(s)),["prevent"])},[D.isFavorite(s.id)?((0,e.wg)(),(0,e.iD)("span",T,K)):((0,e.wg)(),(0,e.iD)("span",z,J))],8,N)])])])])])))),128))])])])])],64)}i(6699);var E={data(){return{isLoading:!1,status:{loadingItem:""},list:[{name:"全部",active:"all"},{name:"椅",active:"chair"},{name:"桌",active:"table"},{name:"系列",active:"series"}],category:"all",products:[],allProducts:[],chairProducts:[],tableProducts:[],seriesProducts:[],favorites:[],favoriteId:[]}},methods:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/sixfeet-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.products=t.data.products,console.log("products:",t),this.sortProducts(t.data.products),this.isLoading=!1}))},sortProducts(t){this.allProducts=[...t];const s=t.filter((t=>"椅"===t.category));this.chairProducts=s;const i=t.filter((t=>"桌"===t.category));this.tableProducts=i;const e=t.filter((t=>"系列"===t.category));this.seriesProducts=e},showProducts(t){switch(this.category=t,this.isLoading=!0,t){case"all":this.products=this.allProducts;break;case"chair":this.products=this.chairProducts;break;case"table":this.products=this.tableProducts;break;case"series":this.products=this.seriesProducts;break;default:break}setTimeout((()=>{this.isLoading=!1}),500)},getProduct(t){this.$router.push(`/product/${t}`)},addCart(t){const s="https://vue3-course-api.hexschool.io/api/sixfeet-api/cart";this.isLoading=!0,this.status.loadingItem=t;const i={product_id:t,qty:1};this.$http.post(s,{data:i}).then((t=>{this.status.loadingItem="",console.log(t.data),this.$httpMessageState(t,"加到購物車"),this.isLoading=!1}))},getFavorites(){this.favorites=JSON.parse(localStorage.getItem("favorites"))||[],console.log("favorites",this.favorites),this.favoriteId=[],this.favorites.forEach((t=>{this.favoriteId.push(t.id)}))},toggleFavorites(t){const s=t.id,i=this.favorites.some((t=>t.id===s));if(i){const t=this.favorites.find((t=>t.id===s));this.favorites.splice(this.favorites.indexOf(t),1),localStorage.setItem("favorites",JSON.stringify(this.favorites));const i={data:{success:!0}};this.$httpMessageState(i,"從我的最愛移除")}else{this.favorites.push(t),localStorage.setItem("favorites",JSON.stringify(this.favorites));const s={data:{success:!0}};this.$httpMessageState(s,"加入我的最愛")}this.getFavorites()},isFavorite(t){return this.favoriteId.includes(t)}},created(){this.getProducts(),this.getFavorites()}},W=i(89);const Z=(0,W.Z)(E,[["render",j]]);var A=Z}}]);
//# sourceMappingURL=121.344cae32.js.map