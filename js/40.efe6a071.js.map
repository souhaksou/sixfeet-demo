{"version":3,"file":"js/40.efe6a071.js","mappings":"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","sources":["webpack://vue-e-commerce/./src/views/UserProductInfo.vue","webpack://vue-e-commerce/./src/views/UserProductInfo.vue?b712"],"sourcesContent":["<template>\n  <loading-overlay :active=\"isLoading\"></loading-overlay>\n  <!-- 商品 -->\n  <section class=\"container my-5\">\n    <div class=\"row g-5\">\n      <div class=\"col-lg-6\">\n        <img class=\"img-fluid\" :src=\"product.imageUrl\" :alt=\"product.title\" />\n        <div class=\"row g-0\" v-if=\"product.images\">\n          <div class=\"col-lg-4\" v-for=\"item in product.images\" :key=\"item\">\n            <img class=\"img-fluid w-100\" :src=\"item\" alt=\"其他圖片\" />\n          </div>\n        </div>\n      </div>\n      <div class=\"col-lg-6\">\n        <div class=\"card\">\n          <div class=\"card-body\">\n            <h3 class=\"card-title mb-3 pb-3 border-bottom fw-bold\">{{ product.title }}</h3>\n            <div class=\"card-text\">\n              <p class=\"h5 mb-3 pb-3 border-bottom lh-lg\">\n                &ensp;&ensp;&ensp;&ensp;{{ product.content }}\n              </p>\n              <p class=\"h6 mb-3 pb-3 border-bottom lh-base\">\n                分類 : {{ product.category }} <br />{{ product.description }}\n              </p>\n            </div>\n            <div class=\"card-text border-bottom mb-3 pb-3 row text-end\">\n              <div class=\"col-sm-6\">\n                <p class=\"h5 text-secondary lh-base\">\n                  原價\n                  <span class=\"text-decoration-line-through\"\n                    >NT${{ $filters.currency(product.origin_price) }}</span\n                  >\n                </p>\n              </div>\n              <div class=\"col-sm-6\">\n                <p class=\"h4 text-dark\">特價 NT${{ $filters.currency(product.price) }}</p>\n              </div>\n            </div>\n            <div class=\"row row-cols-1 row-cols-md-2 gx-1\">\n              <div class=\"col mb-3 mb-md-0\">\n                <a\n                  href=\"#\"\n                  class=\"d-block btn btn-outline-dark px-1\"\n                  @click.prevent=\"addCart(product.id)\"\n                >\n                  <i class=\"bi bi-cart-plus-fill\"></i> 加入購物車\n                </a>\n              </div>\n              <div class=\"col\">\n                <a\n                  href=\"#\"\n                  class=\"d-block btn btn-outline-dark px-1\"\n                  @click.prevent=\"toggleFavorites(product)\"\n                >\n                  <span v-if=\"!isFavorite(product.id)\"\n                    ><i class=\"bi bi-bag-heart-fill\"></i>&ensp;加入最愛</span\n                  ><span v-else><i class=\"bi bi-heartbreak-fill\"></i>&ensp;我不愛它</span>\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n  <!-- 可能會感興趣的商品 -->\n  <section class=\"bg-light py-5\">\n    <div class=\"container\">\n      <h3 class=\"mb-5\">您可能會感興趣的商品</h3>\n      <div class=\"row gy-3\">\n        <div class=\"col-lg-4\" v-for=\"item in interests\" :key=\"item.id\">\n          <div class=\"card border-secondary h-100\">\n            <img class=\"card-img-top img-fluid other-img\" :src=\"item.imageUrl\" :alt=\"item.title\" />\n            <div class=\"card-body d-flex justify-content-end flex-column\">\n              <a href=\"#\" class=\"btn btn-secondary d-block\" @click.prevent=\"toProduct(item.id)\">\n                <i class=\"bi bi-info-square-fill\"></i>&ensp;&ensp;查看更多資訊\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      product: {},\n      products: [],\n      id: '',\n      isLoading: false,\n      favorites: [],\n      favoriteId: [],\n      interests: [],\n    };\n  },\n  methods: {\n    // 取得單一產品\n    getProduct() {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${this.id}`;\n      this.isLoading = true;\n      this.$http.get(api).then((res) => {\n        console.log('product', res.data);\n        this.isLoading = false;\n        if (res.data.success) {\n          this.product = res.data.product;\n        }\n      });\n    },\n    // 加入購物車\n    addCart(id) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.isLoading = true;\n      const cart = { product_id: id, qty: 1 };\n      this.$http.post(url, { data: cart }).then((res) => {\n        console.log(res.data);\n        this.$httpMessageState(res, '加到購物車');\n        this.isLoading = false;\n      });\n    },\n    // 取得我的最愛\n    getFavorites() {\n      this.favorites = JSON.parse(localStorage.getItem('favorites')) || [];\n      console.log('favorites', this.favorites);\n      this.favoriteId = [];\n      this.favorites.forEach((item) => {\n        this.favoriteId.push(item.id);\n      });\n    },\n    // 切換我的最愛\n    toggleFavorites(value) {\n      const checkId = value.id;\n      const checkFavorite = this.favorites.some((item) => item.id === checkId);\n      if (!checkFavorite) {\n        // 不是最愛\n        this.favorites.push(value);\n        localStorage.setItem('favorites', JSON.stringify(this.favorites));\n        const res = { data: { success: true } };\n        this.$httpMessageState(res, '加入我的最愛');\n      } else {\n        // 是最愛\n        const idNum = this.favorites.find((item) => item.id === checkId);\n        this.favorites.splice(this.favorites.indexOf(idNum), 1);\n        localStorage.setItem('favorites', JSON.stringify(this.favorites));\n        const res = { data: { success: true } };\n        this.$httpMessageState(res, '從我的最愛移除');\n      }\n      this.getFavorites();\n    },\n    // 檢查是否最愛\n    isFavorite(id) {\n      return this.favoriteId.includes(id);\n    },\n    // 取得所有產品\n    getProducts() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      this.isLoading = true;\n      return this.$http.get(url).then((res) => {\n        this.products = res.data.products;\n        console.log('products:', res);\n        this.isLoading = false;\n      });\n    },\n    // 過濾並隨機選擇\n    getInterests() {\n      const index = this.products.findIndex((element) => element.id === this.id);\n      this.products.splice(index, 1);\n      const arr = [];\n      while (arr.length < 3) {\n        const num = parseInt(Math.random() * (this.products.length - 1), 10);\n        if (arr.indexOf(num) === -1) {\n          arr.push(num);\n        }\n      }\n      arr.forEach((element) => {\n        this.interests.push(this.products[element]);\n      });\n      console.log(arr, this.interests);\n    },\n    // 跳轉商品頁面\n    toProduct(id) {\n      this.$router.push(`/product/${id}`);\n      this.id = id;\n      this.getProducts();\n      this.getFavorites();\n      this.getProduct();\n      this.interests = [];\n      this.getInterests();\n    },\n  },\n  created() {\n    this.id = this.$route.params.productId;\n    this.getProducts().then(() => {\n      this.getFavorites();\n      this.getProduct();\n      this.getInterests();\n    });\n  },\n};\n</script>\n","import { render } from \"./UserProductInfo.vue?vue&type=template&id=e1e06baa\"\nimport script from \"./UserProductInfo.vue?vue&type=script&lang=js\"\nexport * from \"./UserProductInfo.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\WEB\\\\hexschool\\\\vue-e-commerce\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_24","_hoisted_29","_hoisted_33","_hoisted_44","_createVNode","_component_loading_overlay","active","$data","src","imageUrl","alt","title","images","_createElementBlock","_Fragment","_renderList","item","key","_toDisplayString","content","category","_hoisted_14","description","_ctx","currency","origin_price","price","href","onClick","$options","id","_hoisted_32","_hoisted_35","_hoisted_28","_hoisted_31","_hoisted_38","data","product","products","isLoading","favorites","favoriteId","interests","methods","getProduct","api","this","$http","get","then","res","console","log","success","addCart","url","cart","product_id","qty","post","$httpMessageState","getFavorites","JSON","parse","localStorage","getItem","forEach","push","toggleFavorites","value","checkId","checkFavorite","some","idNum","find","splice","indexOf","setItem","stringify","isFavorite","includes","getProducts","getInterests","index","findIndex","element","arr","length","num","parseInt","Math","random","toProduct","$router","created","$route","params","productId","__exports__","render"],"sourceRoot":""}