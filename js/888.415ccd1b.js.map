{"version":3,"file":"js/888.415ccd1b.js","mappings":"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","sources":["webpack://vue-e-commerce/./src/views/UserProductInfo.vue","webpack://vue-e-commerce/./src/views/UserProductInfo.vue?b712"],"sourcesContent":["<template>\n  <loading-overlay :active=\"isLoading\"></loading-overlay>\n  <!-- 商品 -->\n  <section class=\"container my-5\">\n    <div class=\"row gx-0 g-lg-5\">\n      <div class=\"col-lg-6\">\n        <img class=\"img-fluid\" :src=\"product.imageUrl\" :alt=\"product.title\" />\n        <div class=\"row g-0\" v-if=\"product.images\">\n          <div class=\"col-lg-4\" v-for=\"item in product.images\" :key=\"item\">\n            <img class=\"img-fluid w-100\" :src=\"item\" alt=\"其他圖片\" />\n          </div>\n        </div>\n      </div>\n      <div class=\"col-lg-6\">\n        <div class=\"card h-100\">\n          <div class=\"card-body d-flex flex-column justify-content-between\">\n            <h3 class=\"card-title mb-3 pb-3 border-bottom fw-bold\">{{ product.title }}</h3>\n            <div class=\"card-text\">\n              <p class=\"h5 mb-3 pb-3 border-bottom lh-lg\">\n                &ensp;&ensp;&ensp;&ensp;{{ product.content }}\n              </p>\n            </div>\n            <div class=\"card-text\">\n              <p class=\"h6 mb-3 pb-3 border-bottom lh-base\">\n                分類 : {{ product.category }} <br />{{ product.description }}\n              </p>\n            </div>\n            <div class=\"card-text border-bottom mb-3 pb-3 row\">\n              <div class=\"col-sm-6\">\n                <p class=\"h5 text-secondary lh-base text-center text-lg-start\">\n                  原價\n                  <span class=\"text-decoration-line-through\"\n                    >NT${{ $filters.currency(product.origin_price) }}</span\n                  >\n                </p>\n              </div>\n              <div class=\"col-sm-6\">\n                <p class=\"h4 text-dark text-center text-lg-end\">\n                  特價 NT${{ $filters.currency(product.price) }}\n                </p>\n              </div>\n            </div>\n            <div class=\"row row-cols-1 row-cols-md-2 gx-1\">\n              <div class=\"col mb-3 mb-md-0\">\n                <a\n                  href=\"#\"\n                  class=\"d-block btn btn-outline-dark px-1\"\n                  @click.prevent=\"addCart(product.id)\"\n                >\n                  <i class=\"bi bi-cart-plus-fill\"></i> 加入購物車\n                </a>\n              </div>\n              <div class=\"col\">\n                <a\n                  href=\"#\"\n                  class=\"d-block btn btn-outline-dark px-1\"\n                  @click.prevent=\"toggleFavorites(product)\"\n                >\n                  <span v-if=\"!isFavorite(product.id)\"\n                    ><i class=\"bi bi-bag-heart-fill\"></i>&ensp;加入最愛</span\n                  ><span v-else><i class=\"bi bi-heartbreak-fill\"></i>&ensp;我不愛它</span>\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"my-5 col-lg-8\">\n      <h3 class=\"ms-3 mb-3\">購物須知</h3>\n      <ol class=\"list-group list-group-numbered list-group-flush\">\n        <li class=\"list-group-item\">\n          本公司不提供產品以外的任何形式連帶保證責任，也不具備任何形式的賠償負責。\n        </li>\n        <li class=\"list-group-item\">商品尺寸規格可能些許誤差率，以實際商品出貨為主。</li>\n        <li class=\"list-group-item\">本公司不提供代為處理廢棄家具服務，請自行處理。</li>\n        <li class=\"list-group-item\">\n          收到商品請立即確認否有任何問題，並與服務人員接洽處理換貨事宜，避免後續爭議。\n        </li>\n        <li class=\"list-group-item\">客戶使用不當損壞暇疵，非商品本身問題，恕不接受退/換貨。</li>\n        <li class=\"list-group-item\">所有客製化商品，非產品自身瑕疵不接受退/換貨。</li>\n      </ol>\n    </div>\n  </section>\n  <!-- 可能會感興趣的商品 -->\n  <section class=\"bg-light py-5\">\n    <div class=\"container\">\n      <h3 class=\"mb-5 text-center text-lg-start\">您可能會感興趣的商品</h3>\n      <div class=\"row gy-3\">\n        <div class=\"col-lg-4\" v-for=\"item in interests\" :key=\"item.id\">\n          <div class=\"card border-secondary h-100\">\n            <img class=\"card-img-top img-fluid other-img\" :src=\"item.imageUrl\" :alt=\"item.title\" />\n            <div class=\"card-body d-flex justify-content-end flex-column\">\n              <a href=\"#\" class=\"btn btn-secondary d-block\" @click.prevent=\"toProduct(item.id)\">\n                <i class=\"bi bi-info-square-fill\"></i>&ensp;&ensp;查看更多資訊\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      product: {},\n      products: [],\n      id: '',\n      isLoading: false,\n      favorites: [],\n      favoriteId: [],\n      interests: [],\n    };\n  },\n  watch: {\n    $route(to, from) {\n      console.log('to:', to);\n      console.log('from:', from);\n      if (this.$route.name === 'productInfo') {\n        this.id = this.$route.params.productId;\n        this.getProduct();\n      }\n    },\n  },\n  methods: {\n    thislog() {\n      console.log(this.$route.name);\n    },\n    // 取得單一產品\n    getProduct() {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${this.id}`;\n      this.isLoading = true;\n      this.$http.get(api).then((res) => {\n        console.log('product', res.data);\n        this.isLoading = false;\n        if (res.data.success) {\n          this.product = res.data.product;\n        }\n      });\n    },\n    // 加入購物車\n    addCart(id) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.isLoading = true;\n      const cart = { product_id: id, qty: 1 };\n      this.$http.post(url, { data: cart }).then((res) => {\n        console.log(res.data);\n        this.$httpMessageState(res, '加到購物車');\n        this.isLoading = false;\n      });\n    },\n    // 取得我的最愛\n    getFavorites() {\n      this.favorites = JSON.parse(localStorage.getItem('favorites')) || [];\n      console.log('favorites', this.favorites);\n      this.favoriteId = [];\n      this.favorites.forEach((item) => {\n        this.favoriteId.push(item.id);\n      });\n    },\n    // 切換我的最愛\n    toggleFavorites(value) {\n      const checkId = value.id;\n      const checkFavorite = this.favorites.some((item) => item.id === checkId);\n      if (!checkFavorite) {\n        // 不是最愛\n        this.favorites.push(value);\n        localStorage.setItem('favorites', JSON.stringify(this.favorites));\n        const res = { data: { success: true } };\n        this.$httpMessageState(res, '加入我的最愛');\n      } else {\n        // 是最愛\n        const idNum = this.favorites.find((item) => item.id === checkId);\n        this.favorites.splice(this.favorites.indexOf(idNum), 1);\n        localStorage.setItem('favorites', JSON.stringify(this.favorites));\n        const res = { data: { success: true } };\n        this.$httpMessageState(res, '從我的最愛移除');\n      }\n      this.getFavorites();\n    },\n    // 檢查是否最愛\n    isFavorite(id) {\n      return this.favoriteId.includes(id);\n    },\n    // 取得所有產品\n    getProducts() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      this.isLoading = true;\n      return this.$http.get(url).then((res) => {\n        this.products = res.data.products;\n        console.log('products:', res);\n        this.isLoading = false;\n      });\n    },\n    // 過濾並隨機選擇\n    getInterests() {\n      this.interests = [];\n      const index = this.products.findIndex((element) => element.id === this.id);\n      this.products.splice(index, 1);\n      const arr = [];\n      while (arr.length < 3) {\n        const num = parseInt(Math.random() * (this.products.length - 1), 10);\n        if (arr.indexOf(num) === -1) {\n          arr.push(num);\n        }\n      }\n      arr.forEach((element) => {\n        this.interests.push(this.products[element]);\n      });\n      console.log(arr, this.interests);\n    },\n    // 跳轉商品頁面\n    toProduct(id) {\n      this.$router.push(`/product/${id}`);\n      this.id = id;\n      this.getProducts();\n      this.getFavorites();\n      this.getProduct();\n      this.getInterests();\n    },\n  },\n  created() {\n    this.id = this.$route.params.productId;\n    this.getProducts().then(() => {\n      this.getFavorites();\n      this.getProduct();\n      this.getInterests();\n    });\n  },\n};\n</script>\n","import { render } from \"./UserProductInfo.vue?vue&type=template&id=d438734c\"\nimport script from \"./UserProductInfo.vue?vue&type=script&lang=js\"\nexport * from \"./UserProductInfo.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\WEB\\\\hexschool\\\\vue-e-commerce\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_25","_hoisted_30","_hoisted_34","_hoisted_46","_createVNode","_component_loading_overlay","active","$data","src","imageUrl","alt","title","images","_createElementBlock","_Fragment","_renderList","item","key","_toDisplayString","content","category","_hoisted_15","description","_ctx","currency","origin_price","price","href","onClick","$options","id","_hoisted_33","_hoisted_36","_hoisted_29","_hoisted_32","_hoisted_37","_hoisted_40","data","product","products","isLoading","favorites","favoriteId","interests","watch","$route","to","from","console","log","this","name","params","productId","getProduct","methods","thislog","api","$http","get","then","res","success","addCart","url","cart","product_id","qty","post","$httpMessageState","getFavorites","JSON","parse","localStorage","getItem","forEach","push","toggleFavorites","value","checkId","checkFavorite","some","idNum","find","splice","indexOf","setItem","stringify","isFavorite","includes","getProducts","getInterests","index","findIndex","element","arr","length","num","parseInt","Math","random","toProduct","$router","created","__exports__","render"],"sourceRoot":""}